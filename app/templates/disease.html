{% extends 'layout.html' %}

{% block body %}
<section class="tool-page">
	<div class="tool-intro text-center mb-5">
		<p class="eyebrow text-uppercase mb-2 text-success">Disease diagnostics</p>
		<h2 class="mb-3">Upload a plant photo to detect diseases early.</h2>
		<p class="text-muted">Use a clear leaf image in natural light. Weâ€™ll highlight likely diseases and quick fixes.</p>
	</div>

	<div class="tool-card shadow-sm upload-card">
		<form class="upload-area" method="post" enctype="multipart/form-data">
			<label for="inputfile" class="upload-dropzone">
				<div class="upload-icon mb-3">
					<i class="fa fa-cloud-upload"></i>
				</div>
				<p class="mb-1 font-weight-semibold">Drag &amp; drop or click to upload</p>
				<small class="text-muted">JPG or PNG, max 10MB</small>
				<input type="file" name="file" id="inputfile" accept="image/*" onchange="preview_image(event)">
			</label>

			<div class="preview-wrapper mt-4">
				<img id="output-image" class="img-fluid rounded d-none" alt="Preview" />
			</div>

			<div class="text-center mt-4">
				<button class="btn btn-success btn-lg px-5" type="submit">Predict disease</button>
			</div>
		</form>
	</div>
</section>

<script>
	function preview_image(event) {
		const fileInput = event.target;
		const preview = document.getElementById('output-image');
		if (!fileInput.files || !fileInput.files[0]) {
			preview.classList.add('d-none');
			preview.removeAttribute('src');
			return;
		}

		const reader = new FileReader();
		reader.onload = function () {
			preview.src = reader.result;
			preview.classList.remove('d-none');
		};
		reader.readAsDataURL(fileInput.files[0]);
	}
</script>
{% endblock %}